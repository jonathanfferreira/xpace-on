const asaasKey = "\$aact_hmlg_000MzkwODA2MWY2OGM3MWRlMDU2NWM3MzJlNzZmNGZhZGY6Ojk2Y2EwNDkwLWFkOTYtNGVjNS1iYTIwLTdmZTY0ZGJjNzFmMDo6JGFhY2hfNjE4YzZiMDEtZTdkZC00YWNhLWFmNDgtOWQyNzQwMzQzNjEy"; async function run() { try { const custRes = await fetch('https://sandbox.asaas.com/api/v3/customers', { method: 'POST', headers: { 'access_token': asaasKey, 'Content-Type': 'application/json' }, body: JSON.stringify({ name: 'Tes', email: 'test_qr_25@test.com', cpfCnpj: '00000000000' }) }); const customer = await custRes.json(); const payRes = await fetch('https://sandbox.asaas.com/api/v3/payments', { method: 'POST', headers: { 'access_token': asaasKey, 'Content-Type': 'application/json' }, body: JSON.stringify({ customer: customer.id, billingType: 'PIX', value: 10, dueDate: new Date().toISOString().split('T')[0] }) }); const payResText = await payRes.text(); console.log("Payment Created RAW API Response:", payResText); const payment = JSON.parse(payResText); if (!payment.id) return; const qrRes = await fetch('https://sandbox.asaas.com/api/v3/payments/' + payment.id + '/pixQrCode', { headers: { 'access_token': asaasKey } }); const qrCode = await qrRes.text(); console.log("--- ASAAS QR CODE RESPONSE RAW ---"); console.log(qrCode); } catch (e) { console.error(e); } } run();

// Script pronto, mas o Asaas barra CPF/Email Inválido no Customer Post
